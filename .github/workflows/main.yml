  name: ci.yml

  on:
    push:
      branches:
        - main
    workflow_dispatch:

  jobs:
    zap_scan:
      runs-on: ubuntu-latest
      name: build
      steps:        

        - name: Checkout
          uses: actions/checkout@v2

        - name: mvn build
          run: |
            mvn clean install -DskipTests

        - name: ls
          run: | 
            ls target

        - name: anchore sbom 
          uses: DevSecOps-20/sbom-action@main
          with:
            path: "target/devops-integration.jar"
            format: "cyclonedx"
            upload-artifact: "sbom.xml"

        - name: ls
          run: |
            ls 

        - name: upload artifact
          uses: actions/upload-artifact@v2
          with:
            name: sbom
            path: sbom.xml
